<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printify Automation Tool - Test Interface</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .tab:hover {
            background-color: #f8f9fa;
        }
        .tab.active {
            border-bottom-color: #667eea;
            background-color: #f0f2ff;
        }
        .tab-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .hidden {
            display: none;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }
        button {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background: #5a6fd8;
        }
        button.secondary {
            background: #6c757d;
        }
        button.secondary:hover {
            background: #545b62;
        }
        .status-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }
        .success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .product-list {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s;
        }
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .metric-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        .metric-label {
            color: #6c757d;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Printify Automation Tool</h1>
        <p>AI-powered image processing with smart tags, optimization, and multi-position printing</p>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="showTab('products')">üì¶ Product Management</button>
        <button class="tab" onclick="showTab('upload')">üñºÔ∏è Enhanced Upload</button>
        <button class="tab" onclick="showTab('config')">‚öôÔ∏è Configuration</button>
        <button class="tab" onclick="showTab('analytics')">üìä Analytics</button>
        <button class="tab" onclick="showTab('tools')">üõ†Ô∏è Tools</button>
    </div>

    <!-- Product Management Tab -->
    <div id="products" class="tab-content">
        <h2>Product Management</h2>
        <div class="form-group">
            <label for="product-link">Printify Product Link:</label>
            <input type="url" id="product-link" placeholder="Paste Printify catalog link here...">
        </div>
        <button onclick="addProduct()">Add Product</button>
        <button class="secondary" onclick="clearProducts()">Clear All Products</button>
        
        <h3>Current Products</h3>
        <div id="product-list" class="product-list">
            <p>No products configured yet.</p>
        </div>
        
        <div id="product-status" class="status-box hidden">
            <p id="product-message"></p>
        </div>
    </div>

    <!-- Enhanced Upload Tab -->
    <div id="upload" class="tab-content hidden">
        <h2>üéØ Smart AI-Powered Processing</h2>
        <p><strong>Features:</strong> Smart Tag Generation ‚Ä¢ Image Optimization ‚Ä¢ Multi-Position Printing ‚Ä¢ Configurable Pricing ‚Ä¢ Error Recovery</p>
        
        <div class="form-group">
            <label for="image-upload">Upload AI-Generated Images:</label>
            <input type="file" id="image-upload" multiple accept=".png,.jpg,.jpeg">
            <small>Supports PNG, JPG, JPEG with EXIF metadata</small>
        </div>
        
        <button onclick="startUpload()">üöÄ Smart Upload & Create Products</button>
        
        <div id="upload-progress" class="hidden">
            <h3>Processing Status</h3>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            <p id="upload-status">Initializing...</p>
        </div>
        
        <div id="upload-results" class="status-box hidden">
            <h3>Detailed Results</h3>
            <div id="results-content"></div>
        </div>
    </div>

    <!-- Configuration Tab -->
    <div id="config" class="tab-content hidden">
        <h2>System Configuration</h2>
        
        <div class="form-group">
            <h3>API Settings</h3>
            <label for="api-token">Printify Access Token:</label>
            <input type="password" id="api-token" placeholder="Enter your Printify access token">
            
            <label for="shop-id">Shop ID:</label>
            <input type="text" id="shop-id" placeholder="Enter your shop ID">
        </div>
        
        <button onclick="saveConfig()">Save Configuration</button>
        <button class="secondary" onclick="testConnection()">Test API Connection</button>
        <button class="secondary" onclick="refreshStatus()">üîÑ Refresh Status</button>
        
        <div id="config-status" class="status-box">
            <h3>Configuration Status</h3>
            <p>üîÑ Loading configuration status...</p>
        </div>
    </div>

    <!-- Analytics Tab -->
    <div id="analytics" class="tab-content hidden">
        <h2>Upload Analytics</h2>
        
        <button onclick="refreshAnalytics()">üîÑ Refresh Analytics</button>
        
        <div class="analytics-grid">
            <div class="metric-card">
                <div class="metric-value" id="total-uploads">0</div>
                <div class="metric-label">Total Uploads</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="success-rate">0%</div>
                <div class="metric-label">Success Rate</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="products-created">0</div>
                <div class="metric-label">Products Created</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="avg-processing">0s</div>
                <div class="metric-label">Avg Processing Time</div>
            </div>
        </div>
        
        <div id="analytics-details" class="status-box">
            <h3>Recent Activity</h3>
            <p>No recent activity to display.</p>
        </div>
    </div>

    <!-- Tools Tab -->
    <div id="tools" class="tab-content hidden">
        <h2>Utility Tools</h2>
        
        <div class="form-group">
            <h3>Image Preview & Analysis</h3>
            <label for="analyze-image">Select Image for Analysis:</label>
            <input type="file" id="analyze-image" accept=".png,.jpg,.jpeg">
        </div>
        
        <button onclick="analyzeImage()">üîç Analyze Image</button>
        <button class="secondary" onclick="exportConfig()">üì• Export Config Template</button>
        <button class="secondary" onclick="validateConfig()">‚úÖ Validate Configuration</button>
        
        <div id="analysis-results" class="status-box hidden">
            <h3>Analysis Results</h3>
            <div id="analysis-content"></div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.remove('hidden');
            
            // Add active class to clicked tab button
            event.target.classList.add('active');
        }

        // Product management functions
        let products = [];
        
        function addProduct() {
            const link = document.getElementById('product-link').value;
            if (!link) {
                showStatus('product-status', 'Please enter a product link', 'error');
                return;
            }
            
            // Simulate API call
            showStatus('product-status', 'Adding product...', '');
            
            setTimeout(() => {
                products.push({
                    id: Date.now(),
                    link: link,
                    name: `Product ${products.length + 1}`,
                    provider: 'Generic Provider'
                });
                
                updateProductList();
                showStatus('product-status', 'Product added successfully!', 'success');
                document.getElementById('product-link').value = '';
            }, 1000);
        }
        
        function clearProducts() {
            products = [];
            updateProductList();
            showStatus('product-status', 'All products cleared', 'success');
        }
        
        function updateProductList() {
            const listElement = document.getElementById('product-list');
            if (products.length === 0) {
                listElement.innerHTML = '<p>No products configured yet.</p>';
            } else {
                listElement.innerHTML = products.map(product => 
                    `<p><strong>${product.name}</strong> - ${product.provider}</p>`
                ).join('');
            }
        }

        // Upload functions
        function startUpload() {
            const files = document.getElementById('image-upload').files;
            if (files.length === 0) {
                alert('Please select images to upload');
                return;
            }
            
            document.getElementById('upload-progress').classList.remove('hidden');
            document.getElementById('upload-results').classList.add('hidden');
            
            // Simulate upload progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    completeUpload(files.length);
                }
                
                document.getElementById('progress-fill').style.width = progress + '%';
                document.getElementById('upload-status').textContent = 
                    `Processing images... ${Math.round(progress)}%`;
            }, 500);
        }
        
        function completeUpload(fileCount) {
            document.getElementById('upload-status').textContent = 'Upload complete!';
            document.getElementById('upload-results').classList.remove('hidden');
            document.getElementById('results-content').innerHTML = 
                `<p>‚úÖ Successfully processed ${fileCount} images</p>
                 <p>üì¶ Created ${fileCount * 3} product variants</p>
                 <p>üè∑Ô∏è Generated smart tags automatically</p>`;
        }

        // Configuration functions
        function saveConfig() {
            showStatus('config-status', 'Configuration saved successfully!', 'success');
        }
        
        function testConnection() {
            showStatus('config-status', 'Testing API connection...', '');
            setTimeout(() => {
                showStatus('config-status', '‚úÖ API connection successful!', 'success');
            }, 2000);
        }
        
        function refreshStatus() {
            document.getElementById('config-status').innerHTML = 
                `<h3>Configuration Status</h3>
                 <p>‚úÖ API Connection: Active</p>
                 <p>üì¶ Products Configured: ${products.length}</p>
                 <p>üîß Image Processing: Enabled</p>
                 <p>üè∑Ô∏è Smart Tags: Enabled</p>`;
        }

        // Analytics functions
        function refreshAnalytics() {
            document.getElementById('total-uploads').textContent = Math.floor(Math.random() * 100);
            document.getElementById('success-rate').textContent = Math.floor(Math.random() * 20 + 80) + '%';
            document.getElementById('products-created').textContent = Math.floor(Math.random() * 300);
            document.getElementById('avg-processing').textContent = Math.floor(Math.random() * 10 + 2) + 's';
            
            document.getElementById('analytics-details').innerHTML = 
                `<h3>Recent Activity</h3>
                 <p>‚úÖ 5 images processed successfully</p>
                 <p>üì¶ 15 products created</p>
                 <p>üîÑ Last upload: 2 minutes ago</p>`;
        }

        // Tools functions
        function analyzeImage() {
            const file = document.getElementById('analyze-image').files[0];
            if (!file) {
                alert('Please select an image to analyze');
                return;
            }
            
            document.getElementById('analysis-results').classList.remove('hidden');
            document.getElementById('analysis-content').innerHTML = 
                `<p><strong>Image:</strong> ${file.name}</p>
                 <p><strong>Size:</strong> ${(file.size / 1024).toFixed(2)} KB</p>
                 <p><strong>Type:</strong> ${file.type}</p>
                 <p><strong>Recommended Tags:</strong> abstract, digital-art, colorful</p>
                 <p><strong>Print Positions:</strong> Front, Back</p>`;
        }
        
        function exportConfig() {
            alert('Configuration template exported!');
        }
        
        function validateConfig() {
            alert('‚úÖ Configuration is valid');
        }

        // Utility function for status messages
        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            const messageElement = document.getElementById(elementId.replace('-status', '-message'));
            
            element.classList.remove('hidden', 'success', 'error');
            if (type) element.classList.add(type);
            
            if (messageElement) {
                messageElement.textContent = message;
            } else {
                element.innerHTML = `<p>${message}</p>`;
            }
        }

        // Initialize page
        refreshStatus();
    </script>
</body>
</html>